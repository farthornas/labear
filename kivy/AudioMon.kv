#: import audio_player plyer.audio

ScreenManager:
    MenuScreen:
    LearnNew:
    Monitor:

<MenuScreen>:
    name: 'menu'
    MDRectangleFlatButton:
        text: 'Learn new sound'
        pos_hint: {'center_x':0.5,'center_y':0.6}
        on_press:
            root.manager.transition.direction = "right"
            root.manager.current = 'learn'
    MDRectangleFlatButton:
        text: 'Monitor'
        pos_hint: {'center_x':0.5,'center_y':0.5}
        on_press: 
            root.manager.transition.direction = "left"
            root.manager.current = 'monitor'
    
<LearnNew>:

    name: "learn"
    audio: audio_player
    orientation: 'vertical'
    padding: '250dp'
    spacing: '20dp'

    MDLabel:
        id: state
        text: 'Audio is:'+str(root.audio.state)
        pos_hint: {'center_x':0.7,'center_y':0.8}
        #size_hint_y: None
    MDLabel:
        id: audio_location
        pos_hint: {'center_x':0.7,'center_y':0.7}
        text: 'Audio is saved at - ' + str(root.audio.file_path)
        #size_hint_y: None
    MDLabel:
        pos_hint: {'center_x':0.5,'center_y':0.6}
        id: upload_state_label
        text: ""
    
    MDRectangleFlatButton:
        pos_hint: {'center_x':0.5,'center_y':0.04}
        id: record_button
        text: 'RECORD'
        on_release: root.start_recording()

    MDRectangleFlatButton:
        id: play_button
        text: 'PLAY'
        pos_hint: {'center_x':0.3,'center_y':0.04}
        on_release: root.start_playing()
    
    MDRectangleFlatButton:
        pos_hint: {'center_x':0.7,'center_y':0.04}
        id: upload_button
        text: 'UPLOAD'
        on_release: root.upload()
    
    MDRectangleFlatButton:
        id: menu_button
        text: 'Menu'
        pos_hint: {'center_x':0.9,'center_y':0.55}
        on_release:
            root.manager.transition.direction = "left"
            root.manager.current = "menu"
        

        
<Monitor>:
    name: 'monitor'
    audio: audio_player
    MDLabel:
        id: state
        text: 'Monitor'
        halign: 'center'
        pos_hint: {'center_x':0.5,'center_y':0.7}
    MDLabel:
        pos_hint: {'center_x':0.5,'center_y':0.6}
        id: upload_state_label
        text: ""

    MDRectangleFlatButton:
        pos_hint: {'center_x':0.5,'center_y':0.5}
        id: monitor_button
        text: 'MONITOR'
        on_release: root.start_monitoring()
    MDRectangleFlatButton:
        text: 'Back'
        pos_hint: {'center_x':0.5,'center_y':0.1}
        on_press:
            root.manager.transition.direction = "right"  
            root.manager.current = 'menu'
     