#: import audio_player plyer.audio

ScreenManager:
    MenuScreen:
    Rec:
    Monitor:

<MenuScreen>:
    name: 'menu'
    MDTextFieldRect:
        id: text_user
        hint_text: "Input Username"
        required: True
        pos_hint: {"center_y":.3, "center_x":.5}
        size_hint:0.5,None
        mode: "rectangle"
        multiline: False
    MDRectangleFlatButton:
        text: 'Learn new sound'
        pos_hint: {'center_x':0.5,'center_y':0.6}
        on_press:
            root.manager.transition.direction = "right"
            root.manager.current = 'learn'
    MDRectangleFlatButton:
        text: 'Monitor'
        pos_hint: {'center_x':0.5,'center_y':0.5}
        on_press: 
            root.manager.transition.direction = "left"
            root.manager.current = 'monitor'
    
<Rec>:

    name: "learn"
    audio: audio_player
    orientation: 'vertical'
    padding: '250dp'
    spacing: '20dp'

    MDLabel:
        id: state
        text: 'Audio is:'+str(root.audio.state)
        pos_hint: {'center_x':0.7,'center_y':0.8}
        #size_hint_y: None
    MDTextFieldRect:
        id: text_app
        hint_text: "Label the sound you want to learn"
        required: True
        pos_hint: {"center_y":.3, "center_x":.5}
        size_hint:0.5,None
        mode: "rectangle"
        multiline: False
    #MDDropDownItem:
    #    id: drop_item
    #    pos_hint: {'center_x': .5, 'center_y': .5}
    #    text: 'Item'
    #    on_release: print("Press item")
    MDLabel:
        id: audio_location
        pos_hint: {'center_x':0.7,'center_y':0.7}
        text: 'Audio is saved at - ' + str(root.audio.file_path)
        #size_hint_y: None
    MDLabel:
        pos_hint: {'center_x':0.5,'center_y':0.6}
        id: upload_state_label
        text: ""
    
    MDRectangleFlatButton:
        pos_hint: {'center_x':0.5,'center_y':0.04}
        id: record_button
        text: 'RECORD'
        on_release: root.record()

    MDRectangleFlatButton:
        id: play_button
        text: 'PLAY'
        pos_hint: {'center_x':0.3,'center_y':0.04}
        on_release: root.playback()
    
    MDRectangleFlatButton:
        pos_hint: {'center_x':0.7,'center_y':0.04}
        id: upload_button
        text: 'UPLOAD'
        on_release: root.upload()
    
    MDRectangleFlatButton:
        id: menu_button
        text: 'Menu'
        pos_hint: {'center_x':0.9,'center_y':0.55}
        on_release:
            root.manager.transition.direction = "left"
            root.manager.current = "menu"
        

        
<Monitor>:
    name: 'monitor'
    audio: audio_player
    MDLabel:
        id: state
        text: 'Monitor'
        halign: 'center'
        pos_hint: {'center_x':0.5,'center_y':0.7}
    MDLabel:
        pos_hint: {'center_x':0.5,'center_y':0.6}
        id: upload_state_label
        text: ""

    MDRectangleFlatButton:
        pos_hint: {'center_x':0.5,'center_y':0.5}
        id: monitor_button
        text: 'MONITOR'
        on_release: root.monitor()
    MDRectangleFlatButton:
        text: 'Back'
        pos_hint: {'center_x':0.5,'center_y':0.1}
        on_press:
            root.manager.transition.direction = "right"  
            root.manager.current = 'menu'
     